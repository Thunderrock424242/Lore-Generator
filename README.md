

Installation information
=======

This template repository can be directly cloned to get you started with a new
mod. Simply create a new repository cloned from this one, by following the
instructions provided by [GitHub](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template).

Once you have your clone, simply open the repository in the IDE of your choice. The usual recommendation for an IDE is either IntelliJ IDEA or Eclipse.

If at any point you are missing libraries in your IDE, or you've run into problems you can
run `gradlew --refresh-dependencies` to refresh the local cache. `gradlew clean` to reset everything 
{this does not affect your code} and then start the process again.

Mapping Names:
============
By default, the MDK is configured to use the official mapping names from Mojang for methods and fields 
in the Minecraft codebase. These names are covered by a specific license. All modders should be aware of this
license. For the latest license text, refer to the mapping file itself, or the reference copy here:
https://github.com/NeoForged/NeoForm/blob/main/Mojang.md

Additional Resources:
==========
Community Documentation: https://docs.neoforged.net/
NeoForged Discord: https://discord.neoforged.net/

Configuration
-------------
The mod can use OpenAI for lore generation. After the first run, edit
`config/loregenerator-server.toml` and put your own API key in the
`openai_api_key` field. Alternatively, you can set the `OPENAI_API_KEY`
environment variable. Leaving the field blank and using the environment
variable keeps the key out of plain-text config files and out of the built
mod jar. When a key is supplied in the config, the mod writes a scrambled
copy to `loregenerator.key` in the game directory so you can remove the
plaintext key from the config afterward. Avoid committing your personal API
key to version control. The repository's `.gitignore` ignores the `config/`
directory and `loregenerator.key` to help prevent accidental commits of
secrets.

**Protecting Your API Key**

- Prefer the `OPENAI_API_KEY` environment variable so the key never lives on disk.
- If you must put the key in `loregenerator-server.toml`, make sure the file is
  readable only by you (e.g., `chmod 600` on Linux). Run the game once so the
  scrambled `loregenerator.key` file is created, then remove the key before
  sharing your config or modpack.
- The mod jar generated by `gradlew build` does not contain the API key, but
  anyone with access to your config file can read it. Rotate the key
  immediately if you suspect it has been exposed.

We recommend using OpenAI's ChatGPT-4o model (`openai_model: gpt-4o`) for the
most coherent lore. When `ai_generated` is set to `true` and an API key is
provided, lore is generated through ChatGPT-4o.

If you prefer not to use AI, set `ai_generated` to `false` or omit the API key
and the mod will fall back to its built-in generator, which creates simple
placeholder books.

### Lore Generation Modes

The `lore_generation_mode` setting controls how lore is produced:

- `live`: query OpenAI at runtime; if the request fails, the built-in generator is used.
- `fallback`: always use the built-in generator and never call OpenAI.
- `generate_and_export`: generate lore with OpenAI once and save it to `config/tagged_books.json` for offline reuse.

